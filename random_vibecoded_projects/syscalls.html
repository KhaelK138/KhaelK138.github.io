<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Linux Syscall Challenge</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; background: #0d1117; color: #c9d1d9; min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px; }
  h1 { font-size: 1.8rem; margin-bottom: 6px; color: #58a6ff; }
  .subtitle { color: #8b949e; margin-bottom: 20px; font-size: 0.9rem; }
  .controls { display: flex; gap: 10px; align-items: center; margin-bottom: 16px; flex-wrap: wrap; justify-content: center; }
  select, button { background: #161b22; color: #c9d1d9; border: 1px solid #30363d; border-radius: 6px; padding: 8px 14px; font-size: 0.9rem; cursor: pointer; transition: border-color 0.2s; }
  select:hover, button:hover { border-color: #58a6ff; }
  button.primary { background: #238636; border-color: #238636; color: #fff; font-weight: 600; }
  button.primary:hover { background: #2ea043; }
  button.primary:disabled { opacity: 0.5; cursor: not-allowed; }
  .timer { font-size: 2.5rem; font-weight: 700; font-variant-numeric: tabular-nums; margin-bottom: 16px; }
  .timer.warning { color: #f0883e; }
  .timer.danger { color: #f85149; }
  .timer.done { color: #8b949e; }
  .input-row { display: flex; gap: 8px; margin-bottom: 8px; width: 100%; max-width: 420px; }
  #guess { flex: 1; background: #0d1117; border: 2px solid #30363d; border-radius: 8px; padding: 12px 16px; font-size: 1.1rem; color: #c9d1d9; outline: none; font-family: 'Courier New', monospace; transition: border-color 0.2s; }
  #guess:focus { border-color: #58a6ff; }
  #guess:disabled { opacity: 0.4; }
  .feedback { height: 24px; margin-bottom: 12px; font-size: 0.9rem; font-weight: 600; }
  .feedback.correct { color: #3fb950; }
  .feedback.wrong { color: #f85149; }
  .feedback.duplicate { color: #f0883e; }
  .score { font-size: 1.1rem; margin-bottom: 16px; color: #8b949e; }
  .score span { color: #58a6ff; font-weight: 700; }
  .guessed-list { width: 100%; max-width: 700px; }
  .guessed-list h3 { color: #8b949e; margin-bottom: 8px; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; }
  .tags { display: flex; flex-wrap: wrap; gap: 6px; }
  .tag { background: #161b22; border: 1px solid #238636; color: #3fb950; padding: 3px 10px; border-radius: 20px; font-size: 0.8rem; font-family: 'Courier New', monospace; animation: popIn 0.2s ease-out; }
  @keyframes popIn { from { transform: scale(0.7); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .final-results { text-align: center; margin: 20px 0; padding: 20px; background: #161b22; border: 1px solid #30363d; border-radius: 10px; width: 100%; max-width: 420px; }
  .final-results h2 { color: #58a6ff; margin-bottom: 8px; }
  .final-results p { color: #8b949e; }
  .final-results .big { font-size: 2.5rem; font-weight: 700; color: #3fb950; }
</style>
</head>
<body>

<h1>üêß Linux Syscall Challenge</h1>
<p class="subtitle">How many Linux syscalls can you name?</p>

<div class="controls">
  <select id="timeSelect">
    <option value="60">1 minute</option>
    <option value="120">2 minutes</option>
    <option value="180">3 minutes</option>
    <option value="300">5 minutes</option>
    <option value="600">10 minutes</option>
  </select>
  <button class="primary" id="startBtn">Start</button>
  <button id="resetBtn">Reset</button>
</div>

<div class="timer" id="timer">1:00</div>

<div class="input-row">
  <input type="text" id="guess" placeholder="Type a syscall name..." disabled autocomplete="off" spellcheck="false">
</div>
<div class="feedback" id="feedback"></div>

<div class="score">Score: <span id="score">0</span> / <span id="total">0</span></div>

<div id="finalResults"></div>

<div class="guessed-list">
  <h3 id="guessedHeader" style="display:none">Correct Guesses</h3>
  <div class="tags" id="guessedTags"></div>
</div>

<script>
const SYSCALLS = [
  "_llseek(2)","_newselect(2)","_sysctl(2)","accept(2)","accept4(2)","access(2)","acct(2)","add_key(2)",
  "adjtimex(2)","alarm(2)","alloc_hugepages(2)","arc_gettls(2)","arc_settls(2)","arc_usr_cmpxchg(2)",
  "arch_prctl(2)","atomic_barrier(2)","atomic_cmpxchg_32(2)","bdflush(2)","bind(2)","bpf(2)","brk(2)",
  "breakpoint(2)","cacheflush(2)","capget(2)","capset(2)","chdir(2)","chmod(2)","chown(2)","chown32(2)",
  "chroot(2)","clock_adjtime(2)","clock_getres(2)","clock_gettime(2)","clock_nanosleep(2)","clock_settime(2)",
  "clone(2)","clone2(2)","clone3(2)","close(2)","close_range(2)","connect(2)","copy_file_range(2)","creat(2)",
  "create_module(2)","delete_module(2)","dup(2)","dup2(2)","dup3(2)","epoll_create(2)","epoll_create1(2)",
  "epoll_ctl(2)","epoll_pwait(2)","epoll_pwait2(2)","epoll_wait(2)","eventfd(2)","eventfd2(2)","execv(2)",
  "execve(2)","execveat(2)","exit(2)","exit_group(2)","faccessat(2)","faccessat2(2)","fadvise64(2)",
  "fadvise64_64(2)","fallocate(2)","fanotify_init(2)","fanotify_mark(2)","fchdir(2)","fchmod(2)",
  "fchmodat(2)","fchown(2)","fchown32(2)","fchownat(2)","fcntl(2)","fcntl64(2)","fdatasync(2)",
  "fgetxattr(2)","finit_module(2)","flistxattr(2)","flock(2)","fork(2)","free_hugepages(2)",
  "fremovexattr(2)","fsconfig(2)","fsetxattr(2)","fsmount(2)","fsopen(2)","fspick(2)","fstat(2)",
  "fstat64(2)","fstatat64(2)","fstatfs(2)","fstatfs64(2)","fsync(2)","ftruncate(2)","ftruncate64(2)",
  "futex(2)","futimesat(2)","get_kernel_syms(2)","get_mempolicy(2)","get_robust_list(2)",
  "get_thread_area(2)","get_tls(2)","getcpu(2)","getcwd(2)","getdents(2)","getdents64(2)",
  "getdomainname(2)","getdtablesize(2)","getegid(2)","getegid32(2)","geteuid(2)","geteuid32(2)",
  "getgid(2)","getgid32(2)","getgroups(2)","getgroups32(2)","gethostname(2)","getitimer(2)",
  "getpeername(2)","getpagesize(2)","getpgid(2)","getpgrp(2)","getpid(2)","getppid(2)","getpriority(2)",
  "getrandom(2)","getresgid(2)","getresgid32(2)","getresuid(2)","getresuid32(2)","getrlimit(2)",
  "getrusage(2)","getsid(2)","getsockname(2)","getsockopt(2)","gettid(2)","gettimeofday(2)","getuid(2)",
  "getuid32(2)","getunwind(2)","getxattr(2)","getxgid(2)","getxpid(2)","getxuid(2)","init_module(2)",
  "inotify_add_watch(2)","inotify_init(2)","inotify_init1(2)","inotify_rm_watch(2)","io_cancel(2)",
  "io_destroy(2)","io_getevents(2)","io_pgetevents(2)","io_setup(2)","io_submit(2)","io_uring_enter(2)",
  "io_uring_register(2)","io_uring_setup(2)","ioctl(2)","ioperm(2)","iopl(2)","ioprio_get(2)",
  "ioprio_set(2)","ipc(2)","kcmp(2)","kern_features(2)","kexec_file_load(2)","kexec_load(2)","keyctl(2)",
  "kill(2)","landlock_add_rule(2)","landlock_create_ruleset(2)","landlock_restrict_self(2)","lchown(2)",
  "lchown32(2)","lgetxattr(2)","link(2)","linkat(2)","listen(2)","listxattr(2)","llistxattr(2)",
  "lookup_dcookie(2)","lremovexattr(2)","lseek(2)","lsetxattr(2)","lstat(2)","lstat64(2)","madvise(2)",
  "mbind(2)","memory_ordering(2)","membarrier(2)","memfd_create(2)","memfd_secret(2)","migrate_pages(2)",
  "mincore(2)","mkdir(2)","mkdirat(2)","mknod(2)","mknodat(2)","mlock(2)","mlock2(2)","mlockall(2)",
  "mmap(2)","mmap2(2)","modify_ldt(2)","mount(2)","move_mount(2)","move_pages(2)","mprotect(2)",
  "mq_getsetattr(2)","mq_notify(2)","mq_open(2)","mq_timedreceive(2)","mq_timedsend(2)","mq_unlink(2)",
  "mremap(2)","msgctl(2)","msgget(2)","msgrcv(2)","msgsnd(2)","msync(2)","munlock(2)","munlockall(2)",
  "munmap(2)","name_to_handle_at(2)","nanosleep(2)","newfstatat(2)","nfsservctl(2)","nice(2)",
  "old_adjtimex(2)","old_getrlimit(2)","oldfstat(2)","oldlstat(2)","oldolduname(2)","oldstat(2)",
  "oldumount(2)","olduname(2)","open(2)","open_by_handle_at(2)","open_tree(2)","openat(2)","openat2(2)",
  "or1k_atomic(2)","pause(2)","pciconfig_iobase(2)","pciconfig_read(2)","pciconfig_write(2)",
  "perf_event_open(2)","personality(2)","perfctr(2)","perfmonctl(2)","pidfd_getfd(2)",
  "pidfd_send_signal(2)","pidfd_open(2)","pipe(2)","pipe2(2)","pivot_root(2)","pkey_alloc(2)",
  "pkey_free(2)","pkey_mprotect(2)","poll(2)","ppoll(2)","prctl(2)","pread64(2)","preadv(2)","preadv2(2)",
  "prlimit64(2)","process_madvise(2)","process_vm_readv(2)","process_vm_writev(2)","pselect6(2)",
  "ptrace(2)","pwrite64(2)","pwritev(2)","pwritev2(2)","query_module(2)","quotactl(2)","quotactl_fd(2)",
  "read(2)","readahead(2)","readdir(2)","readlink(2)","readlinkat(2)","readv(2)","reboot(2)","recv(2)",
  "recvfrom(2)","recvmsg(2)","recvmmsg(2)","remap_file_pages(2)","removexattr(2)","rename(2)",
  "renameat(2)","renameat2(2)","request_key(2)","restart_syscall(2)","riscv_flush_icache(2)","rmdir(2)",
  "rseq(2)","rt_sigaction(2)","rt_sigpending(2)","rt_sigprocmask(2)","rt_sigqueueinfo(2)",
  "rt_sigreturn(2)","rt_sigsuspend(2)","rt_sigtimedwait(2)","rt_tgsigqueueinfo(2)","rtas(2)",
  "s390_runtime_instr(2)","s390_pci_mmio_read(2)","s390_pci_mmio_write(2)","s390_sthyi(2)",
  "s390_guarded_storage(2)","sched_get_affinity(2)","sched_get_priority_max(2)",
  "sched_get_priority_min(2)","sched_getaffinity(2)","sched_getattr(2)","sched_getparam(2)",
  "sched_getscheduler(2)","sched_rr_get_interval(2)","sched_set_affinity(2)","sched_setaffinity(2)",
  "sched_setattr(2)","sched_setparam(2)","sched_setscheduler(2)","sched_yield(2)","seccomp(2)",
  "select(2)","semctl(2)","semget(2)","semop(2)","semtimedop(2)","send(2)","sendfile(2)","sendfile64(2)",
  "sendmmsg(2)","sendmsg(2)","sendto(2)","set_mempolicy(2)","set_robust_list(2)","set_thread_area(2)",
  "set_tid_address(2)","set_tls(2)","setdomainname(2)","setfsgid(2)","setfsgid32(2)","setfsuid(2)",
  "setfsuid32(2)","setgid(2)","setgid32(2)","setgroups(2)","setgroups32(2)","sethae(2)",
  "sethostname(2)","setitimer(2)","setns(2)","setpgid(2)","setpgrp(2)","setpriority(2)","setregid(2)",
  "setregid32(2)","setresgid(2)","setresgid32(2)","setresuid(2)","setresuid32(2)","setreuid(2)",
  "setreuid32(2)","setrlimit(2)","setsid(2)","setsockopt(2)","settimeofday(2)","setuid(2)","setuid32(2)",
  "setup(2)","setxattr(2)","sgetmask(2)","shmat(2)","shmctl(2)","shmdt(2)","shmget(2)","shutdown(2)",
  "sigaction(2)","sigaltstack(2)","signal(2)","signalfd(2)","signalfd4(2)","sigpending(2)",
  "sigprocmask(2)","sigreturn(2)","sigsuspend(2)","socket(2)","socketcall(2)","socketpair(2)","spill(2)",
  "splice(2)","spu_create(2)","spu_run(2)","ssetmask(2)","stat(2)","stat64(2)","statfs(2)","statfs64(2)",
  "statx(2)","stime(2)","subpage_prot(2)","swapcontext(2)","switch_endian(2)","swapoff(2)","swapon(2)",
  "symlink(2)","symlinkat(2)","sync(2)","sync_file_range(2)","sync_file_range2(2)","syncfs(2)",
  "sys_debug_setcontext(2)","syscall(2)","sysfs(2)","sysinfo(2)","syslog(2)","sysmips(2)","tee(2)",
  "tgkill(2)","time(2)","timer_create(2)","timer_delete(2)","timer_getoverrun(2)","timer_gettime(2)",
  "timer_settime(2)","timerfd_create(2)","timerfd_gettime(2)","timerfd_settime(2)","times(2)","tkill(2)",
  "truncate(2)","truncate64(2)","ugetrlimit(2)","umask(2)","umount(2)","umount2(2)","uname(2)",
  "unlink(2)","unlinkat(2)","unshare(2)","uselib(2)","ustat(2)","userfaultfd(2)","usr26(2)","usr32(2)",
  "utime(2)","utimensat(2)","utimes(2)","utrap_install(2)","vfork(2)","vhangup(2)","vm86old(2)","vm86(2)",
  "vmsplice(2)","wait4(2)","waitid(2)","waitpid(2)","write(2)","writev(2)","xtensa(2)",
  "afs_syscall(2)","break(2)","ftime(2)","getpmsg(2)","gtty(2)","idle(2)","lock(2)","madvise1(2)",
  "mpx(2)","phys(2)","prof(2)","profil(2)","putpmsg(2)","security(2)","stty(2)","tuxcall(2)",
  "ulimit(2)","vserver(2)",
  "bfin_spinlock(2)","dma_memcpy(2)","sram_alloc(2)","sram_free(2)",
  "metag_get_tls(2)","metag_set_fpu_flags(2)","metag_set_tls(2)","metag_setglobalbit(2)",
  "cmpxchg_badaddr(2)"
];

// Build lookup: stripped (alphanumeric lowercase) -> original display name
const lookup = {};
SYSCALLS.forEach(sc => {
  // Display name: remove the (2) suffix
  const display = sc.replace(/\(2\)$/, '');
  // Stripped: only alphanumeric, lowercase
  const stripped = display.replace(/[^a-z0-9]/gi, '').toLowerCase();
  if (!lookup[stripped]) lookup[stripped] = display;
});

const totalCount = Object.keys(lookup).length;

let timeLeft = 60;
let selectedTime = 60;
let interval = null;
let running = false;
let guessed = new Set(); // stripped keys
let guessedDisplay = []; // display names in order

const timerEl = document.getElementById('timer');
const guessEl = document.getElementById('guess');
const feedbackEl = document.getElementById('feedback');
const scoreEl = document.getElementById('score');
const totalEl = document.getElementById('total');
const tagsEl = document.getElementById('guessedTags');
const headerEl = document.getElementById('guessedHeader');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const timeSelect = document.getElementById('timeSelect');
const finalEl = document.getElementById('finalResults');

totalEl.textContent = totalCount;

function formatTime(s) {
  const m = Math.floor(s / 60);
  const sec = s % 60;
  return m + ':' + String(sec).padStart(2, '0');
}

function updateTimer() {
  timerEl.textContent = formatTime(timeLeft);
  timerEl.className = 'timer';
  if (!running && timeLeft === selectedTime) timerEl.classList.add('done');
  else if (timeLeft <= 10) timerEl.classList.add('danger');
  else if (timeLeft <= 30) timerEl.classList.add('warning');
}

function endGame() {
  running = false;
  clearInterval(interval);
  guessEl.disabled = true;
  startBtn.disabled = false;
  startBtn.textContent = 'Start';
  timerEl.classList.add('done');
  finalEl.innerHTML = `<div class="final-results"><h2>Time's Up!</h2><div class="big">${guessed.size}</div><p>syscalls named out of ${totalCount}</p></div>`;
}

function reset() {
  clearInterval(interval);
  running = false;
  selectedTime = parseInt(timeSelect.value);
  timeLeft = selectedTime;
  guessed.clear();
  guessedDisplay = [];
  guessEl.value = '';
  guessEl.disabled = true;
  feedbackEl.textContent = '';
  feedbackEl.className = 'feedback';
  scoreEl.textContent = '0';
  tagsEl.innerHTML = '';
  headerEl.style.display = 'none';
  finalEl.innerHTML = '';
  startBtn.disabled = false;
  startBtn.textContent = 'Start';
  updateTimer();
}

startBtn.addEventListener('click', () => {
  if (running) return;
  reset();
  running = true;
  guessEl.disabled = false;
  guessEl.focus();
  startBtn.disabled = true;
  startBtn.textContent = 'Running...';

  interval = setInterval(() => {
    timeLeft--;
    updateTimer();
    if (timeLeft <= 0) endGame();
  }, 1000);
});

resetBtn.addEventListener('click', reset);

timeSelect.addEventListener('change', () => {
  reset();
});

guessEl.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && running) {
    const raw = guessEl.value.trim();
    if (!raw) return;

    // Strip to alphanumeric lowercase
    const stripped = raw.replace(/[^a-z0-9]/gi, '').toLowerCase();

    if (!stripped) {
      guessEl.value = '';
      return;
    }

    if (guessed.has(stripped)) {
      feedbackEl.textContent = `"${raw}" ‚Äî already guessed!`;
      feedbackEl.className = 'feedback duplicate';
    } else if (lookup[stripped]) {
      guessed.add(stripped);
      const displayName = lookup[stripped];
      guessedDisplay.push(displayName);
      scoreEl.textContent = guessed.size;
      feedbackEl.textContent = `‚úì ${displayName}`;
      feedbackEl.className = 'feedback correct';
      headerEl.style.display = 'block';
      const tag = document.createElement('span');
      tag.className = 'tag';
      tag.textContent = displayName;
      tagsEl.prepend(tag);

      if (guessed.size === totalCount) {
        clearInterval(interval);
        running = false;
        guessEl.disabled = true;
        finalEl.innerHTML = `<div class="final-results"><h2>üéâ Perfect Score!</h2><div class="big">${totalCount}/${totalCount}</div><p>You named every single syscall with ${formatTime(timeLeft)} remaining!</p></div>`;
      }
    } else {
      feedbackEl.textContent = `‚úó "${raw}" ‚Äî not a syscall`;
      feedbackEl.className = 'feedback wrong';
    }

    guessEl.value = '';
  }
});

updateTimer();
</script>
</body>
</html>